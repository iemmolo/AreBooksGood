{{ define "main" }}
  <h1 class="page-title">{{ .Title }}</h1>
  <div class="chess-intro">
    {{ .Content }}
  </div>

  {{ $puzzles := site.Data.chesspuzzles }}
  <div id="chess-app" data-puzzles='{{ $puzzles | jsonify }}'>
    <div class="chess-category-bar">
      <label for="category-select">Section:</label>
      <select id="category-select"></select>
    </div>
    <div id="category-description" class="chess-category-desc"></div>
    <div id="category-progress" class="chess-category-progress"></div>

    <div class="chess-puzzle-header">
      <div class="chess-puzzle-info">
        <span class="chess-puzzle-title-row">
          <span id="puzzle-title" class="chess-puzzle-title"></span>
          <span id="puzzle-difficulty" class="chess-puzzle-difficulty"></span>
        </span>
        <span id="puzzle-description" class="chess-puzzle-desc"></span>
      </div>
      <div class="chess-puzzle-nav">
        <button id="prev-puzzle" title="Previous puzzle">&lt;</button>
        <span id="puzzle-counter"></span>
        <button id="next-puzzle" title="Next puzzle">&gt;</button>
      </div>
    </div>

    <div class="chess-layout">
      <div class="chess-board-wrapper">
        <div class="chess-coords chess-coords-files">
          <span>a</span><span>b</span><span>c</span><span>d</span>
          <span>e</span><span>f</span><span>g</span><span>h</span>
        </div>
        <div class="chess-coords chess-coords-ranks">
          <span>8</span><span>7</span><span>6</span><span>5</span>
          <span>4</span><span>3</span><span>2</span><span>1</span>
        </div>
        <div id="chess-board" class="chess-board"></div>
      </div>

      <div class="chess-sidebar">
        <div id="chess-status" class="chess-status">Loading...</div>
        <div class="chess-controls">
          <button id="btn-reset">Reset</button>
          <button id="btn-hint">Hint</button>
        </div>
        <div class="chess-move-log">
          <h3>Moves</h3>
          <ol id="move-log"></ol>
        </div>
        <div class="chess-legend">
          <span class="chess-legend-item"><span class="chess-legend-piece legend-white">&#9818;</span> White</span>
          <span class="chess-legend-item"><span class="chess-legend-piece">&#9812;</span> Black</span>
        </div>
      </div>
    </div>
  </div>
{{ end }}
